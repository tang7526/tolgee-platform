!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("react"),require("@tolgee/web")):"function"==typeof define&&define.amd?define(["exports","react","@tolgee/web"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self)["@tolgee/react"]={},e.React,e["@tolgee/web"])}(this,(function(e,t,n){"use strict";function r(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var o=r(t);const s={useSuspense:!0},l=o.default.createContext(void 0);let a;const u=()=>{const e=t.useContext(l)||a;if(!e)throw new Error("Couldn't find tolgee instance, did you forgot to use `TolgeeProvider`?");return e},c=()=>{const[e,n]=t.useState(0);return{instance:e,rerender:t.useCallback((()=>{n((e=>e+1))}),[n])}},i=(e,r)=>{const{tolgee:o,options:s}=u(),l=n.getFallback(e),a=n.getFallbackArray(l).join(":"),i=Object.assign(Object.assign({},s),r),{rerender:d,instance:f}=c(),b=t.useRef(),g=t.useRef([]);g.current=[];const p=o.isLoaded(l);t.useEffect((()=>{const e=o.onNsUpdate(d);return b.current=e,p||e.subscribeNs(l),g.current.forEach((t=>{e.subscribeNs(t)})),()=>{e.unsubscribe()}}),[p,a,o]),t.useEffect((()=>(o.addActiveNs(l),()=>o.removeActiveNs(l))),[a,o]);const v=t.useCallback((e=>{var t;const n=null!==(t=e.ns)&&void 0!==t?t:null==l?void 0:l[0];return(e=>{var t;g.current.push(e),null===(t=b.current)||void 0===t||t.subscribeNs(e)})(n),o.t(Object.assign(Object.assign({},e),{ns:n}))}),[o,f]);if(i.useSuspense&&!p)throw o.addActiveNs(l,!0);return{t:v,isLoading:!p}},d=e=>{if(!e)return;const t={};return Object.entries(e||{}).forEach((([e,n])=>{if("function"==typeof n)t[e]=e=>n(f(e));else if(o.default.isValidElement(n)){const r=n;t[e]=e=>void 0!==r.props.children?o.default.cloneElement(r):o.default.cloneElement(r,{},f(e))}else t[e]=n})),t},f=e=>Array.isArray(e)?o.default.Children.toArray(e):e;e.GlobalContextPlugin=e=>t=>(a={tolgee:t,options:Object.assign(Object.assign({},s),e)},t),e.T=e=>{const t=e.keyName||e.children;void 0===t&&console.error("T component: keyName not defined");const n=e.defaultValue||(e.keyName?e.children:void 0),{t:r}=i(),s=f(r({key:t,params:d(e.params),defaultValue:n,noWrap:e.noWrap,ns:e.ns}));return o.default.createElement(o.default.Fragment,null,s)},e.TolgeeProvider=({tolgee:e,options:n,children:r,fallback:a})=>{const[u,c]=t.useState(!e.isLoaded());t.useEffect((()=>(e.run().finally((()=>{c(!1)})),()=>{e.stop()})),[e]);const i=Object.assign(Object.assign({},s),n);return i.useSuspense?o.default.createElement(l.Provider,{value:{tolgee:e,options:i}},u?a:o.default.createElement(t.Suspense,{fallback:a||null},r)):o.default.createElement(l.Provider,{value:{tolgee:e,options:i}},u?a:r)},e.TolgeeProviderContext=l,e.useTolgee=e=>{const{tolgee:n}=u(),{rerender:r}=c();return t.useEffect((()=>{const t=null==e?void 0:e.map((e=>n.on(e,r)));return()=>{null==t||t.forEach((e=>e.unsubscribe()))}}),[null==e?void 0:e.join(":")]),n},e.useTranslate=(e,r)=>{const{t:o,isLoading:s}=i(e,r);return{t:t.useCallback(((...e)=>{const t=n.getTranslateProps(...e);return o(t)}),[o]),isLoading:s}},Object.keys(n).forEach((function(t){"default"===t||e.hasOwnProperty(t)||Object.defineProperty(e,t,{enumerable:!0,get:function(){return n[t]}})})),Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=tolgee-react.umd.min.js.map
